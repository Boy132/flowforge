/* Animations */
.animate-success {
    animation: successPulse 1s ease-in-out;
}

.animate-error {
    animation: errorShake 0.6s ease-in-out;
}

@keyframes successPulse {
    0% {
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
    }
    50% {
        box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
    }
}

@keyframes errorShake {
    0% {
        transform: translateX(0);
    }
    25% {
        transform: translateX(-5px);
    }
    50% {
        transform: translateX(5px);
    }
    75% {
        transform: translateX(-5px);
    }
    100% {
        transform: translateX(0);
    }
}

@layer base {
    /* Base variables and theme configuration */
    :root {
        /* Base spacing */
        --kanban-base-spacing: 1rem;
        --kanban-spacing-xs: calc(var(--kanban-base-spacing) * 0.25); /* 0.25rem | 4px */
        --kanban-spacing-sm: calc(var(--kanban-base-spacing) * 0.5);  /* 0.5rem | 8px */
        --kanban-spacing-md: var(--kanban-base-spacing);              /* 1rem | 16px */
        --kanban-spacing-lg: calc(var(--kanban-base-spacing) * 1.5);  /* 1.5rem | 24px */
        --kanban-spacing-xl: calc(var(--kanban-base-spacing) * 2);    /* 2rem | 32px */

        /* Column styling */
        --kanban-column-bg: theme('colors.gray.100');
        --kanban-column-header: theme('colors.gray.700');
        --kanban-column-border: #e5e7eb;
        --kanban-column-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);

        /* Card styling */
        --kanban-card-bg: theme('colors.white');
        --kanban-card-hover: theme('colors.gray.50');
        --kanban-card-border: #f1f1f1;
        --kanban-card-shadow-normal: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.05);
        --kanban-card-shadow-hover: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.05);

        /* Priority indicators */
        --kanban-priority-high: #ef4444;
        --kanban-priority-medium: #f59e0b;
        --kanban-priority-low: #10b981;
    }

    .dark {
        /* Dark mode column styling */
        --kanban-column-bg: rgba(31, 41, 55, 0.8);
        --kanban-column-header: theme('colors.gray.200');
        --kanban-column-border: #1f2937;
        --kanban-column-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);

        /* Dark mode card styling */
        --kanban-card-bg: rgba(43, 55, 73, 0.95);
        --kanban-card-hover: rgba(55, 65, 81, 0.95);
        --kanban-card-border: #374151;
        --kanban-card-shadow-normal: 0 2px 4px rgba(0, 0, 0, 0.25), 0 1px 2px rgba(0, 0, 0, 0.3);
        --kanban-card-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.25);

        /* Dark mode priority indicators */
        --kanban-priority-high: #f87171;
        --kanban-priority-medium: #fbbf24;
        --kanban-priority-low: #34d399;
    }
}

/* Kanban Board Layout */
.kanban-board {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.300') transparent;
    padding: var(--kanban-spacing-md);
}

.kanban-board::-webkit-scrollbar {
    height: 6px;
}

.kanban-board::-webkit-scrollbar-track {
    background: transparent;
}

.kanban-board::-webkit-scrollbar-thumb {
    background-color: theme('colors.gray.300');
    border-radius: 10px;
}

.dark .kanban-board::-webkit-scrollbar-thumb {
    background-color: theme('colors.gray.600');
}

/* Column Styles */
.kanban-column {
    backdrop-filter: blur(3px);
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.kanban-column-header {
    position: relative;
    margin-bottom: var(--kanban-spacing-xs);
}

/* Card Styles */
.kanban-card {
    transition-property: box-shadow, transform, background-color;
    transition-duration: 200ms;
    transition-timing-function: ease-in-out;
    backface-visibility: hidden;
    transform: translateZ(0);
    padding: var(--kanban-spacing-sm);
}

.kanban-card.priority-high {
    border-left-color: var(--kanban-priority-high);
}

.kanban-card.priority-medium {
    border-left-color: var(--kanban-priority-medium);
}

.kanban-card.priority-low {
    border-left-color: var(--kanban-priority-low);
}

.kanban-card > div:nth-child(2) { /* Card Description */
    margin-bottom: var(--kanban-spacing-sm);
}

/* Priority indicators */
.kanban-priority-indicator {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 4px;
    border-top-left-radius: 0.5rem;
    border-bottom-left-radius: 0.5rem;
}

.kanban-priority-indicator.high {
    background-color: var(--kanban-priority-high);
}

.kanban-priority-indicator.medium {
    background-color: var(--kanban-priority-medium);
}

.kanban-priority-indicator.low {
    background-color: var(--kanban-priority-low);
}

/* Priority badges */
.kanban-badge-priority {
    display: inline-flex;
    align-items: center;
    font-weight: 500;
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
}

.kanban-badge-priority.high {
    color: rgb(185, 28, 28);
    background-color: rgba(239, 68, 68, 0.1);
}

.kanban-badge-priority.medium {
    color: rgb(180, 83, 9);
    background-color: rgba(245, 158, 11, 0.1);
}

.kanban-badge-priority.low {
    color: rgb(4, 120, 87);
    background-color: rgba(16, 185, 129, 0.1);
}

.dark .kanban-badge-priority.high {
    color: rgb(248, 113, 113);
    background-color: rgba(239, 68, 68, 0.2);
}

.dark .kanban-badge-priority.medium {
    color: rgb(251, 191, 36);
    background-color: rgba(245, 158, 11, 0.2);
}

.dark .kanban-badge-priority.low {
    color: rgb(52, 211, 153);
    background-color: rgba(16, 185, 129, 0.2);
}

/* Due date indicators */
.kanban-badge-due-date {
    display: inline-flex;
    align-items: center;
    font-weight: 500;
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
}

.kanban-badge-due-date.overdue {
    color: rgb(185, 28, 28);
    background-color: rgba(239, 68, 68, 0.1);
}

.kanban-badge-due-date.upcoming {
    color: rgb(67, 56, 202);
    background-color: rgba(79, 70, 229, 0.1);
}

.kanban-badge-due-date.future {
    color: rgb(4, 120, 87);
    background-color: rgba(16, 185, 129, 0.1);
}

.dark .kanban-badge-due-date.overdue {
    color: rgb(248, 113, 113);
    background-color: rgba(239, 68, 68, 0.2);
}

.dark .kanban-badge-due-date.upcoming {
    color: rgb(139, 92, 246);
    background-color: rgba(79, 70, 229, 0.2);
}

.dark .kanban-badge-due-date.future {
    color: rgb(52, 211, 153);
    background-color: rgba(16, 185, 129, 0.2);
}

/* Card Badge Styles */
.kanban-card-badge {
    @apply text-xs font-medium px-2 py-0.5 rounded-full;
}

/* Empty States */
.kanban-empty-column {
    opacity: 0.7;
    transition: opacity 0.2s ease-in-out;
}

.kanban-empty-column:hover {
    opacity: 1;
}

/* Drag Handle */
.kanban-drag-handle {
    @apply opacity-0 transition-opacity group-hover:opacity-70 hover:opacity-100;
}

.kanban-loading-shimmer {
    @apply animate-pulse rounded-md bg-gray-200 dark:bg-gray-700;
}

/* Add Status Color Classes for count badges */
.kanban-status-todo {
    @apply bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-200;
}

.kanban-status-in-progress {
    @apply bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300;
}

.kanban-status-review {
    @apply bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300;
}

.kanban-status-done {
    @apply bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300;
}

/* Kanban badge color classes - used for count badges */
.kanban-color-default {
    @apply bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200;
}

.kanban-color-slate {
    @apply bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-200;
}

.kanban-color-gray {
    @apply bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200;
}

.kanban-color-zinc {
    @apply bg-zinc-200 text-zinc-700 dark:bg-zinc-700 dark:text-zinc-200;
}

.kanban-color-neutral {
    @apply bg-neutral-200 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-200;
}

.kanban-color-stone {
    @apply bg-stone-200 text-stone-700 dark:bg-stone-700 dark:text-stone-200;
}

.kanban-color-red {
    @apply bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300;
}

.kanban-color-orange {
    @apply bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-300;
}

.kanban-color-amber {
    @apply bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300;
}

.kanban-color-yellow {
    @apply bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300;
}

.kanban-color-lime {
    @apply bg-lime-100 text-lime-700 dark:bg-lime-900/50 dark:text-lime-300;
}

.kanban-color-green {
    @apply bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300;
}

.kanban-color-emerald {
    @apply bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300;
}

.kanban-color-teal {
    @apply bg-teal-100 text-teal-700 dark:bg-teal-900/50 dark:text-teal-300;
}

.kanban-color-cyan {
    @apply bg-cyan-100 text-cyan-700 dark:bg-cyan-900/50 dark:text-cyan-300;
}

.kanban-color-sky {
    @apply bg-sky-100 text-sky-700 dark:bg-sky-900/50 dark:text-sky-300;
}

.kanban-color-blue {
    @apply bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300;
}

.kanban-color-indigo {
    @apply bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300;
}

.kanban-color-violet {
    @apply bg-violet-100 text-violet-700 dark:bg-violet-900/50 dark:text-violet-300;
}

.kanban-color-purple {
    @apply bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300;
}

.kanban-color-fuchsia {
    @apply bg-fuchsia-100 text-fuchsia-700 dark:bg-fuchsia-900/50 dark:text-fuchsia-300;
}

.kanban-color-pink {
    @apply bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300;
}

.kanban-color-rose {
    @apply bg-rose-100 text-rose-700 dark:bg-rose-900/50 dark:text-rose-300;
}

/* Responsive Adaptations */
@media (max-width: 640px) {
    .kanban-column {
        width: 280px !important;
        min-width: 280px !important;
    }

    .kanban-card {
        padding: 0.75rem !important;
    }

    .kanban-column-header {
        padding: 0.75rem 1rem !important;
    }

    .kanban-board {
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
        gap: 0.75rem !important;
    }
}

@media (min-width: 641px) and (max-width: 1024px) {
    .kanban-column {
        width: 280px !important;
        min-width: 280px !important;
    }

    .kanban-board {
        gap: 1rem !important;
    }
}

@media (min-width: 1025px) and (max-width: 1280px) {
    .kanban-column {
        width: 300px !important;
        min-width: 300px !important;
    }
}

@media (min-width: 1281px) {
    .kanban-column {
        width: 320px !important;
        min-width: 320px !important;
    }
}

/* Touch device optimizations */
@media (pointer: coarse) {
    .kanban-drag-handle {
        opacity: 0.7 !important;
        padding: 0.5rem;
        margin: -0.5rem;
    }

    .kanban-card-badge {
        padding-top: 0.25rem !important;
        padding-bottom: 0.25rem !important;
    }
}
