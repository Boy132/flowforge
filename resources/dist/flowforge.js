// resources/js/flowforge.js
function flowforge({ state }) {
  return {
    state,
    currentColumn: null,
    currentCard: null,
    columns: state.columns,
    formData: {},
    init: function() {
      console.log("FlowForge Alpine component initialized");
    },
    openCreateModal(columnId) {
      this.currentColumn = columnId;
      this.formData = {
        [state.statusField]: columnId
      };
      this.$dispatch("open-modal", { id: "create-card-modal" });
    },
    submitCreateForm() {
      console.log(this.formData);
      this.$wire.createCard(this.formData).then((cardId) => {
        if (cardId) {
          this.$dispatch("close-modal", { id: "create-card-modal" });
          this.formData = {};
        }
      });
    },
    openEditModal(card, columnId) {
      this.currentCard = card;
      this.currentColumn = columnId;
      this.formData = { ...card };
      this.formData[state.statusField] = columnId;
      this.$dispatch("open-modal", { id: "edit-card-modal" });
    },
    submitEditForm() {
      this.$wire.updateCard(this.currentCard.id, this.formData).then((result) => {
        if (result) {
          this.$dispatch("close-modal", { id: "edit-card-modal" });
          this.formData = {};
        }
      });
    },
    deleteCard() {
      if (confirm("Are you sure you want to delete this card? This action cannot be undone.")) {
        this.$wire.deleteCard(this.currentCard.id).then((result) => {
          if (result) {
            this.$dispatch("close-modal", { id: "delete-card-modal" });
            this.formData = {};
          }
        });
      }
    }
  };
}
export {
  flowforge as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vanMvZmxvd2ZvcmdlLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmbG93Zm9yZ2Uoe3N0YXRlfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjdXJyZW50Q29sdW1uOiBudWxsLFxuICAgICAgICBjdXJyZW50Q2FyZDogbnVsbCxcbiAgICAgICAgY29sdW1uczogc3RhdGUuY29sdW1ucyxcbiAgICAgICAgZm9ybURhdGE6IHtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGbG93Rm9yZ2UgQWxwaW5lIGNvbXBvbmVudCBpbml0aWFsaXplZCcpXG4gICAgICAgICAgICAvLyBJbml0aWFsaXNlIHRoZSBBbHBpbmUgY29tcG9uZW50IGhlcmUsIGlmIHlvdSBuZWVkIHRvLlxuICAgICAgICB9LFxuXG4gICAgICAgIG9wZW5DcmVhdGVNb2RhbChjb2x1bW5JZCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29sdW1uID0gY29sdW1uSWQ7XG4gICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0ge1xuICAgICAgICAgICAgW3N0YXRlLnN0YXR1c0ZpZWxkXTogY29sdW1uSWRcbiAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdvcGVuLW1vZGFsJywgeyBpZDogJ2NyZWF0ZS1jYXJkLW1vZGFsJyB9KVxuICAgICAgICB9LFxuXG4gICAgICAgIHN1Ym1pdENyZWF0ZUZvcm0oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm1EYXRhKTtcbiAgICAgICAgICAgIHRoaXMuJHdpcmUuY3JlYXRlQ2FyZCh0aGlzLmZvcm1EYXRhKS50aGVuKGNhcmRJZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNhcmRJZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnY2xvc2UtbW9kYWwnLCB7IGlkOiAnY3JlYXRlLWNhcmQtbW9kYWwnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb3BlbkVkaXRNb2RhbChjYXJkLCBjb2x1bW5JZCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZCA9IGNhcmQ7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDb2x1bW4gPSBjb2x1bW5JZDtcblxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBmb3JtIGRhdGEgd2l0aCBjdXJyZW50IGNhcmQgdmFsdWVzXG4gICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0gey4uLmNhcmR9O1xuICAgICAgICAgICAgdGhpcy5mb3JtRGF0YVtzdGF0ZS5zdGF0dXNGaWVsZF0gPSBjb2x1bW5JZDtcblxuICAgICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ29wZW4tbW9kYWwnLCB7IGlkOiAnZWRpdC1jYXJkLW1vZGFsJyB9KVxuICAgICAgICB9LFxuXG4gICAgICAgIHN1Ym1pdEVkaXRGb3JtKCkge1xuICAgICAgICAgICAgdGhpcy4kd2lyZS51cGRhdGVDYXJkKHRoaXMuY3VycmVudENhcmQuaWQsIHRoaXMuZm9ybURhdGEpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdjbG9zZS1tb2RhbCcsIHsgaWQ6ICdlZGl0LWNhcmQtbW9kYWwnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgY2FyZD8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS4nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHdpcmUuZGVsZXRlQ2FyZCh0aGlzLmN1cnJlbnRDYXJkLmlkKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdjbG9zZS1tb2RhbCcsIHsgaWQ6ICdkZWxldGUtY2FyZC1tb2RhbCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQWUsU0FBUixVQUEyQixFQUFDLE1BQUssR0FBRztBQUN2QyxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0EsZUFBZTtBQUFBLElBQ2YsYUFBYTtBQUFBLElBQ2IsU0FBUyxNQUFNO0FBQUEsSUFDZixVQUFVLENBRVY7QUFBQSxJQUVBLE1BQU0sV0FBWTtBQUNkLGNBQVEsSUFBSSx3Q0FBd0M7QUFBQSxJQUV4RDtBQUFBLElBRUEsZ0JBQWdCLFVBQVU7QUFDdEIsV0FBSyxnQkFBZ0I7QUFDckIsV0FBSyxXQUFXO0FBQUEsUUFDaEIsQ0FBQyxNQUFNLFdBQVcsR0FBRztBQUFBLE1BQ3pCO0FBQ0ksV0FBSyxVQUFVLGNBQWMsRUFBRSxJQUFJLG9CQUFvQixDQUFDO0FBQUEsSUFDNUQ7QUFBQSxJQUVBLG1CQUFtQjtBQUNmLGNBQVEsSUFBSSxLQUFLLFFBQVE7QUFDekIsV0FBSyxNQUFNLFdBQVcsS0FBSyxRQUFRLEVBQUUsS0FBSyxZQUFVO0FBQ2hELFlBQUksUUFBUTtBQUNSLGVBQUssVUFBVSxlQUFlLEVBQUUsSUFBSSxvQkFBb0IsQ0FBQztBQUN6RCxlQUFLLFdBQVcsQ0FBQztBQUFBLFFBQ3JCO0FBQUEsTUFDSixDQUFDO0FBQUEsSUFDTDtBQUFBLElBRUEsY0FBYyxNQUFNLFVBQVU7QUFDMUIsV0FBSyxjQUFjO0FBQ25CLFdBQUssZ0JBQWdCO0FBR3JCLFdBQUssV0FBVyxFQUFDLEdBQUcsS0FBSTtBQUN4QixXQUFLLFNBQVMsTUFBTSxXQUFXLElBQUk7QUFFbkMsV0FBSyxVQUFVLGNBQWMsRUFBRSxJQUFJLGtCQUFrQixDQUFDO0FBQUEsSUFDMUQ7QUFBQSxJQUVBLGlCQUFpQjtBQUNiLFdBQUssTUFBTSxXQUFXLEtBQUssWUFBWSxJQUFJLEtBQUssUUFBUSxFQUFFLEtBQUssWUFBVTtBQUNyRSxZQUFJLFFBQVE7QUFDUixlQUFLLFVBQVUsZUFBZSxFQUFFLElBQUksa0JBQWtCLENBQUM7QUFDdkQsZUFBSyxXQUFXLENBQUM7QUFBQSxRQUNyQjtBQUFBLE1BQ0osQ0FBQztBQUFBLElBQ0w7QUFBQSxJQUVBLGFBQWE7QUFDVCxVQUFJLFFBQVEsMEVBQTBFLEdBQUc7QUFDckYsYUFBSyxNQUFNLFdBQVcsS0FBSyxZQUFZLEVBQUUsRUFBRSxLQUFLLFlBQVU7QUFDdEQsY0FBSSxRQUFRO0FBQ1IsaUJBQUssVUFBVSxlQUFlLEVBQUUsSUFBSSxvQkFBb0IsQ0FBQztBQUN6RCxpQkFBSyxXQUFXLENBQUM7QUFBQSxVQUNyQjtBQUFBLFFBQ0osQ0FBQztBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNKOyIsCiAgIm5hbWVzIjogW10KfQo=
